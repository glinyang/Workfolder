{% extends "reports/base.html" %}

{% block title %}Build Status{% endblock %}

{% block css_build %}class="active"{% endblock %}

{% load staticfiles %}

{% load reports_extras %}

{% block content %}

<h4>
    Build Information<br/><small>Development Service Group</small>
</h4>


<table id="info" class="table table-condensed table-bordered">
	<tbody>
		<tr class="active">
			<th class="col-md-3">Downloads and Links</th>
			<th class="col-md-9" colspan="3">Config Spec</th>
		</tr>
		<tr>
			<td rowspan="2">
				<ul>
					<li><a target="_blank"
						, href="ftp://9.30.226.37/DataCollection/builds/outputs/">Build
							Outputs</a></li>
					<li><a target="_blank"
						, href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/IBM%20SPSS%20Data%20Collection%20R%26D/page/DSG">DSG
							Wiki</a></li>
					<li><a target="_blank" , href="http://9.30.226.36/">Build
							dashboard</a></li>
					<li><a target="_blank"
						, href="http://9.30.226.36/DashboardTools/UserLogin.jsp">Build
							Administration</a></li>
					<li><a target="_blank"
						, href="http://installation.raleigh.ibm.com/getting-started/index">IBM
							Install Home (InstallShield Download)</a></li>
					<li><a target="_blank"
						, href="http://installation.raleigh.ibm.com/getting-started/index">IBM
							Fix Central (TEST)</a></li>
					<li><a target="_blank"
						, href="http://installation.raleigh.ibm.com/getting-started/index">IBM
							Fix Central (PROD)</a></li>
					<li><a target="_blank"
						, href="http://rchgsa.ibm.com/gsa/rchgsa/home/f/m/fmtdata/web/public/FAME_DIST/Current%20FMT%20Toolkit/">FMT
							Toolkit Download</a></li>
                    <li><a target="_blank"
                        , href="https://vottcq1s.canlab.ibm.com/cqweb/">ClearQuest</a></li>
				</ul>
			</td>
			<td class="col-md-3"><b># 6.0.1 FP3&nbsp;&nbsp;(6.0.1.3)</b> <br/><small>
			     element * CHECKEDOUT<br />
			     element * .../dimensions_bugfix_6.0.1/LATEST<br />
				 element * DIMENSIONS_6.0.1.3_GA<br />
				 element * DIMENSIONS_6.0.1.2_GA<br />
				 element * DIMENSIONS_6.0.1.1_GA<br />
				 element * DIMENSIONS_6.0.1_GA<br />
				 element * /main/LATEST
			</small></td>
            <td class="col-md-3"><b># 6.0.1 FP3 HF</b> <br/><small>
                 element * CHECKEDOUT<br />
                 element * ...\dimensions_hotfix_6.0.1_p3\LATEST<br />
                 element * DIMENSIONS_6.0.1.3_GA<br />
                 element * DIMENSIONS_6.0.1.2_GA<br />
                 element * DIMENSIONS_6.0.1.1_GA<br />
                 element * DIMENSIONS_6.0.1_GA<br />
                 element * /main/LATEST
            </small></td>
            <td class="col-md-3"><b># 6.0.1 FP1 HF</b> <br/><small>
                 element * CHECKEDOUT<br />
                 element * ...\dimensions_hotfix_6.0.1_p1\LATEST<br />
                 element * DIMENSIONS_6.0.1.1_GA<br />
                 element * DIMENSIONS_6.0.1_GA<br />
                 element * /main/LATEST
            </small></td>
		</tr>
		<tr>
            <td class="col-md-3"><b># 7.0 FP2&nbsp;&nbsp;(7.0.0.2)</b> <br/><small>
                element * CHECKEDOUT<br/>
                element * ...\dimensions_bugfix_7.0.0\LATEST<br/>
                element * DIMENSIONS_7.0.0.1_GA<br/>
                element * DIMENSIONS_7.0.0.0_GA<br/>
                element * \main\LATEST
            </small></td>
            <td class="col-md-3"><b># 7.0 FP1 HF</b> <br/><small>
                 element * CHECKEDOUT<br />
                 element * ...\dimensions_hotfix_7.0.0_p1\LATEST<br />
                 element * DIMENSIONS_7.0.0.1_GA<br />
                 element * DIMENSIONS_7.0.0.0_GA<br />
                 element * /main/LATEST
            </small></td>
            <td class="col-md-3"><b># Time Config Example</b> <br/><small>
				element * CHECKEDOUT<br />
				time 1-Oct-2014.17:10:11<br />
				element * /main/LATEST<br />
				end time
            </small></td>
		</tr>
	</tbody>
</table>
<br/>
<h4>
        DC 7 - Fix Pack 2<br /> <small>GA: 2015-6-22</small>
</h4>
<table id="dc7fp" class="table table-condensed">
    <tbody>
        <tr class="active">
            <th style="width: 1%">No.</th>
            <th style="width: 12%">Name</th>
            <th style="width: 8%">Version</th>
            <th style="width: 8%">Date</th>
            <th style="width: 17%">Time</th>
            <th style="width: 10">Status</th>
            <th style="width: 20%">Outputs</th>
            <th style="width: 24%">Comments</th>
        </tr>
        <tr>
            <td>1</td>
            <td>DimensionsMaster</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Data Collection master control build</td>
        </tr>
        <tr>
            <td>2</td>
            <td>CommonComponents</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Common components, e.g., mrMsg</td>
        </tr>
        <tr>
            <td>3</td>
            <td>DataModel</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Data Model components and installer</td>
        </tr>
        <tr>
            <td>4</td>
            <td>DimensionNet</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Server common component</td>
        </tr>
        <tr>
            <td>5</td>
            <td>DBE</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Data Backend components</td>
        </tr>
        <tr>
            <td>6</td>
            <td>mrInterview</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Server components</td>
        </tr>
        <tr>
            <td>7</td>
            <td>DCP</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>SRDK installer</td>
        </tr>
        <tr>
            <td>8</td>
            <td>mrPaper</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Paper components</td>
        </tr>
        <tr>
            <td>9</td>
            <td>PESMSCLIENT</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Java components, e.g., C&DS client</td>
        </tr>
        <tr>
            <td>10</td>
            <td>DAF</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Desktop framework components</td>
        </tr>
        <tr>
            <td>11</td>
            <td>MobileInterviewing</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Interviewer components</td>
        </tr>
        <tr>
            <td>12</td>
            <td>mrStudio</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Professional components</td>
        </tr>
        <tr>
            <td>13</td>
            <td>DesktopAuthor</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Author components</td>
        </tr>
        <tr>
            <td>14</td>
            <td>DesktopReporter</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Reporter components</td>
        </tr>
        <tr>
            <td>15</td>
            <td>ClickOnceComponents</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>ClickOnce components</td>
        </tr>
        <tr>
            <td>16</td>
            <td>WebAuthor</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Web-deployed Author</td>
        </tr>
        <tr>
            <td>17</td>
            <td>WebReporter</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Web-deployed Reporter</td>
        </tr>
        <tr>
            <td>18</td>
            <td>DimensionsPatches</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Fix Pack installers</td>
        </tr>
    </tbody>
</table>
<br/>
<h4>
	DC 7.0.1 - Major Release<br /> <small>GA: 2015-2-24</small>
</h4>
<table id="dc701" class="table table-condensed">
	<tbody>
		<tr class="active">
			<th style="width: 1%">No.</th>
			<th style="width: 12%">Name</th>
			<th style="width: 8%">Version</th>
			<th style="width: 8%">Date</th>
			<th style="width: 17%">Time <small>(China Time)</small></th>
			<th style="width: 10">Status</th>
			<th style="width: 20%">Outputs</th>
			<th style="width: 24%">Comments</th>
		</tr>
		<tr>
            <td>1</td>
            <td>DCMaster</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Data Collection master control build</td>
        </tr>
        <tr>
            <td>2</td>
            <td>DCDataModel</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>CommonComponents and DataModel</td>
        </tr>
        <tr>
            <td>3</td>
            <td>DCBackend</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>DimensionNet, DBE and mrInterview</td>
        </tr>
        <tr>
            <td>4</td>
            <td>DCFrontend</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>DAF, Java, Desktop Products, etc.</td>
        </tr>
        <tr>
            <td>5</td>
            <td>DCCommonInstall</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Merge modules and small installers</td>
        </tr>
        <tr>
            <td>6</td>
            <td>DCDesktop</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Data Model, SRDK and Desktop installers</td>
        </tr>
        <tr>
            <td>7</td>
            <td>DCClickOnce</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>ClickOnce components, WDA & WDR</td>
        </tr>
        <tr>
            <td>8</td>
            <td>DCServer</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Server installer</td>
        </tr>
        <tr>
            <td>9</td>
            <td>DCDOC_EN</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Doc, Isaac build only</td>
        </tr>
        <tr>
            <td>10</td>
            <td>DDL</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>DDL installer</td>
        </tr>
        <tr>
            <td>11</td>
            <td>DCUnitTests</td>
            <td colspan="5"><img src="{% static 'reports/loading34.gif' %}"><i>&nbsp;&nbsp;Contacting build dashboard...</i></td>
            <td>Unit tests</td>
        </tr>
	</tbody>
</table>
<br/>
<h4>Help</h4>
<ul>
<li>Any problems, please contact: <b>WangXuepeng@cn.ibm.com</b></li>
</ul>

<br/>
<br/>
<br/>
<br/>
{% endblock %}

{% block page_js %}
<script>
	$(document).ready(function() {
		// disable the ajax alert
        window.alert = function() {};

        $('#dc701 tr').each(function() {
            release_version = '7.0.1.0';
            if (this.className != 'active') {
                // Not the head row
                build_name = this.cells[1].innerHTML;
                fill_build_row(this, release_version, build_name);
            }
        });


        $('#dc7fp tr').each(function() {
            release_version = '7.0.0.2';
            if (this.className != 'active') {
                // Not the head row
                build_name = this.cells[1].innerHTML;
                fill_build_row(this, release_version, build_name);
            }
        });


        function fill_build_row(tr, release_version, build_name) {
            ajaxGet('/get_build_item/?version=' + release_version + '&name=' + build_name, function(content) {
            	// on success
                build_item = content.build_item;
                if (build_item.length == 1) {
                    tr.cells[2].innerText = "Error occurred";
                    tr.className = "warning";
                } else {
                    // build item format: <version>,<start_date>,<start_time>,<end_time>,<duration>,<status>
                    build_version = build_item[0]
                    build_start_date = build_item[1]
                    build_start_time = build_item[2]
                    build_end_time = build_item[3]
                    build_duration = build_item[4]
                    build_status = build_item[5]

                    label_class = "label label-success";
                    if (build_status == "GA") {
                        label_class = "label label-default";
                    } else if (build_status == "SUCCESSFUL") {
                        label_class = "label label-success";
                    } else if (build_status == "RUNNING") {
                        label_class = "label label-warning";
                    } else if (build_status == "FAILED") {
                        label_class = "label label-danger";
                    } else {
                        label_class = "label label-info";
                    }

                    // Bulld the row html
                    row_html = tr.cells[0].outerHTML;
                    row_html += "<td><a target='_blank' href='http://builddashboard/RptRlsList.jsp?rlsType=0&version=" + release_version + "&type=" + build_name + "'>" + build_name + "</a></td>";
                    row_html += "<td><a target='_blank' href='http://builddashboard/RptBldDetails.jsp?rlsType=0&version=" + build_version + "&type=" + build_name + "'>" + build_version + "</a></td>";
                    row_html += "<td>" + build_start_date + "</td>";
                    if (build_end_time == '') {
                        // Running status, no end time and duration
                        str_end_time = '';

                        if (build_name == 'DCDataModel') {
                            str_end_time = '1 hr 30 mins';
                        }
                        else if (build_name == 'DCBackend') {
                            str_end_time = '1 hr 40 mins';
                        }
                        else if (build_name == 'DCFrontend') {
                            str_end_time = '40 mins';
                        }
                        else if (build_name == 'DCCommonInstall') {
                            str_end_time = '55 mins';
                        }
                        else if (build_name == 'DCDesktop') {
                            str_end_time = '3 hrs 10 mins';
                        }
                        else if (build_name == 'DCClickOnce') {
                            str_end_time = '25 mins';
                        }
                        else if (build_name == 'DCServer') {
                            str_end_time = '45 mins';
                        }
                        else if (build_name == 'DCDOC_EN') {
                            str_end_time = '1 hr 50 mins';
                        }
                        else if (build_name == 'DDL') {
                            str_end_time = '1 hr';
                        }
                        else if (build_name == 'DCUnitTests') {
                            str_end_time = '30 mins';
                        }

                        row_html += "<td>" + build_start_time + " - <small><b>(ETA: " + str_end_time + ")</b></small></td>";
                    }
                    else {
                        row_html += "<td>" + build_start_time + " - " + build_end_time + "&nbsp;&nbsp;<small>(" + build_duration + ")</small></td>";
                    }

                    row_html += "<td><span class='" + label_class + "'>" + build_status + "</span></td>";

                    if (name=='DCDOC_EN') {
                        row_html += ("<td>" +
                                "<a target='_blank' href='ftp://9.30.226.37/Doc/builds/outputs/" + build_name + "/" + build_version + "/Artifacts/'>files</a>" +
                                "&nbsp;&nbsp;|&nbsp;&nbsp;" +
                                "<a target='_blank' href='ftp://9.30.226.37/Doc/builds/outputs/" + build_name + "/" + build_version + "/BLDLOGS/DCDOC_EN_mainlog.txt'>main.log</a>" +
                                "&nbsp;&nbsp;|&nbsp;&nbsp;" +
                                "<a target='_blank' href='ftp://9.30.226.37/Doc/builds/outputs/" + build_name + "/" + build_version + "/BLDLOGS/'>more logs</a>"  +
                                "</td>");
                    }
                    else {

	                    row_html += ("<td>" +
	                            "<a target='_blank' href='ftp://9.30.226.37/DataCollection/builds/outputs/" + build_name + "/" + build_version + "/Artifacts/'>files</a>" +
	                            "&nbsp;&nbsp;|&nbsp;&nbsp;" +
	                            "<a target='_blank' href='ftp://9.30.226.37/DataCollection/builds/outputs/" + build_name + "/" + build_version + "/BLDLOGS/main.log'>main.log</a>" +
	                            "&nbsp;&nbsp;|&nbsp;&nbsp;" +
	                            "<a target='_blank' href='ftp://9.30.226.37/DataCollection/builds/outputs/" + build_name + "/" + build_version + "/BLDLOGS/'>more logs</a>"  +
	                            "</td>");
                    }
                    row_html += tr.cells[3].outerHTML;

                    tr.innerHTML = row_html;

                } // End if/else
            }); // End ajaxGet
        } // End function

    }); // End document.ready()
</script>
{% endblock %}